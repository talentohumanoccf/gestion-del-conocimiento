import React, { useState } from 'react';
import { 
  Users, 
  Brain, 
  Search, 
  Target, 
  TrendingUp, 
  Award, 
  ChevronRight, 
  ChevronDown,
  CheckCircle2, 
  ShieldCheck,
  GitMerge,
  Info,
  Sprout,
  Flame,
  Map as MapIcon,
  Scroll,
  Flag,
  Coffee,
  MessageCircle,
  FileText,
  Rocket
} from 'lucide-react';

const ExpandableCard = ({ title, shortDesc, longDesc, icon, id, type }) => {
  const [isOpen, setIsOpen] = useState(false);

  return (
    <div 
      className={`group transition-all duration-300 border rounded-2xl p-4 cursor-pointer ${
        isOpen 
          ? 'bg-white shadow-md border-blue-200 ring-1 ring-blue-50' 
          : 'bg-white hover:border-blue-100 hover:shadow-sm border-slate-100'
      }`}
      onClick={() => setIsOpen(!isOpen)}
    >
      <div className="flex items-start justify-between">
        <div className="flex items-start space-x-3">
          {type === 'phase' ? (
            <div className={`w-8 h-8 rounded-full flex items-center justify-center font-bold text-xs shrink-0 transition-colors ${
              isOpen ? 'bg-blue-600 text-white' : 'bg-slate-100 text-slate-500'
            }`}>
              {id}
            </div>
          ) : (
            <div className={`p-2 rounded-lg shrink-0 transition-colors ${
              isOpen ? 'bg-blue-600 text-white' : 'bg-blue-50 text-blue-600'
            }`}>
              {icon}
            </div>
          )}
          <div>
            <h3 className={`font-bold transition-colors ${isOpen ? 'text-blue-700' : 'text-slate-800'}`}>
              {title}
            </h3>
            {!isOpen && <p className="text-xs text-slate-500 mt-1 line-clamp-1">{shortDesc}</p>}
          </div>
        </div>
        <div className="text-slate-300 group-hover:text-blue-400">
          {isOpen ? <ChevronDown size={18} /> : <ChevronRight size={18} />}
        </div>
      </div>
      
      {isOpen && (
        <div className="mt-4 pt-4 border-t border-slate-50 animate-in fade-in slide-in-from-top-2 duration-300">
          <p className="text-sm text-slate-600 leading-relaxed italic border-l-2 border-blue-200 pl-3">
            {longDesc}
          </p>
        </div>
      )}
    </div>
  );
};

const App = () => {
  const [activeTab, setActiveTab] = useState('diagnostico');
  const [activeGuide, setActiveGuide] = useState(0);

  const phases = [
    { id: 1, title: 'Benchmarking Nacional', short: 'Comparativa de mejores pr√°cticas.', long: 'Ejercicio comparativo con instituciones del pa√≠s para identificar tendencias en sucesi√≥n organizacional, bancos de conocimiento y modelos de mentoring estructurado.' },
    { id: 2, title: 'Plataforma Institucional', short: 'Repositorio digital y AppSheet.', long: 'Creaci√≥n de una suite digital en Google y proyecci√≥n de una App en AppSheet para el registro de procesos, seguimiento de mentor√≠as y gesti√≥n documental simplificada.' },
    { id: 3, title: 'An√°lisis de Base de Datos', short: 'Filtrado de variables cr√≠ticas.', long: 'Evaluaci√≥n de variables como antig√ºedad, a√±os faltantes para pensi√≥n, nivel jer√°rquico y responsabilidad misional para pre-identificar riesgos de p√©rdida de conocimiento.' },
    { id: 4, title: 'Matriz de Cuantificaci√≥n', short: 'Criterios ponderados de criticidad.', long: 'Aplicaci√≥n de una matriz t√©cnica que eval√∫a si el cargo es √∫nico, el tiempo en el rol, cercan√≠a a jubilaci√≥n y la dependencia operativa institucional.' },
    { id: 5, title: 'Validaci√≥n con L√≠deres', short: 'Confirmaci√≥n de cargos cr√≠ticos.', long: 'Entrevistas con responsables de proceso para confirmar hallazgos, identificar nuevos cargos en riesgo y priorizar procesos que requieren documentaci√≥n urgente.' },
    { id: 6, title: 'Estrategia de Documentaci√≥n', short: 'M√©todos de captura de saber.', long: 'Definici√≥n de medios efectivos como manuales, cartillas, videos tutoriales y comunidades de pr√°ctica para los 34 cargos cr√≠ticos priorizados.' },
    { id: 7, title: 'Contacto con Expertos', short: 'Acompa√±amiento individual.', long: 'Sesiones personalizadas con los colaboradores expertos para definir exactamente qu√© conocimiento t√°ctico debe transferirse y a qui√©n.' },
    { id: 8, title: 'Carga en Nube', short: 'Consolidaci√≥n del saber.', long: 'Proceso guiado para subir el conocimiento documentado al repositorio digital institucional, asegurando su disponibilidad permanente.' },
    { id: 9, title: 'Seguimiento Institucional', short: 'Monitoreo conjunto.', long: 'Evaluaci√≥n peri√≥dica entre el experto, el l√≠der de proceso y Gesti√≥n Humana para garantizar que la transferencia sea efectiva y el indicador se mantenga.' },
  ];

  const strategies = [
    { icon: <Users size={20} />, title: 'Mentoring Estrat√©gico', short: 'Aprendizaje experiencial.', long: 'La l√≠nea estrat√©gica m√°s fuerte. Utiliza a los expertos actuales para preparar a las segundas l√≠neas mediante coaching y proyectos estrat√©gicos.' },
    { icon: <Target size={20} />, title: 'Modelo 9 Cajas (Talento)', short: 'Mapa de potencial y desempe√±o.', long: 'Categorizaci√≥n institucional del talento para definir rutas de fidelizaci√≥n para los "High Potential" y planes de retiro asistido para quienes est√°n por pensionarse.' },
    { icon: <TrendingUp size={20} />, title: 'Movilidad y Rutas Duales', short: 'Crecimiento lateral y vertical.', long: 'Permite el enriquecimiento del puesto y rotaciones. Se definen rutas t√©cnicas (especialistas) y gerenciales para diversificar las opciones de carrera.' },
    { icon: <Award size={20} />, title: 'Certificaci√≥n por Niveles', short: 'Escuelas internas de formaci√≥n.', long: 'Los procesos documentados se vuelven curr√≠culos. Los colaboradores avanzan desde nivel b√°sico hasta experto, recibiendo certificaciones institucionales.' },
    { icon: <TrendingUp size={20} />, title: 'Progresi√≥n Salarial', short: 'Reconocimiento por desempe√±o.', long: 'Vinculaci√≥n de la escala salarial con los niveles de certificaci√≥n y el cumplimiento de metas superiores al 90% en la evaluaci√≥n de desempe√±o.' },
    { icon: <GitMerge size={20} />, title: 'Rutas de Sucesi√≥n', short: 'Continuidad operativa asegurada.', long: 'Identificaci√≥n clara de sucesores para cargos estrat√©gicos, minimizando el impacto operativo ante retiros o ausencias imprevistas.' },
  ];

  const mentoringPhases = [
    { icon: <Sprout size={24} />, color: 'bg-blue-500', title: '1. Semilla', desc: 'Convocatoria y selecci√≥n de mentores con trayectoria y mentees de alto potencial.' },
    { icon: <Flame size={24} />, color: 'bg-indigo-500', title: '2. Alquimia', desc: 'HITO: Matchmaking inteligente. Cruce de habilidades y qu√≠mica profesional para las 10 duplas.' },
    { icon: <MapIcon size={24} />, color: 'bg-emerald-500', title: '3. Traves√≠a', desc: 'Desarrollo de 6 sesiones de mentor√≠a guiada con soporte continuo de Gesti√≥n Humana.' },
    { icon: <Scroll size={24} />, color: 'bg-amber-500', title: '4. Legado', desc: 'Evaluaci√≥n de impacto, feedback cruzado y graduaci√≥n de la cohorte pilotaje.' },
  ];

  const guideContent = [
    { 
      title: 'Semilla', 
      icon: <Sprout />, 
      color: 'blue',
      actions: ['Agendar Coffee Check', 'Revisar perfil en LinkedIn/Intranet', 'Definir canal (WhatsApp/Teams)'],
      icebreakers: ['¬øCu√°l ha sido tu proyecto favorito?', '¬øQu√© esperas aprender de esta dupla?']
    },
    { 
      title: 'Alquimia', 
      icon: <Flame />, 
      color: 'indigo',
      actions: ['Firmar Acuerdo de Mentoring', 'Definir frecuencia (Quincenal)', 'Establecer 3 metas SMART'],
      icebreakers: ['¬øC√≥mo prefieres recibir feedback?', '¬øCu√°l es nuestro mayor reto conjunto?']
    },
    { 
      title: 'Traves√≠a', 
      icon: <MapIcon />, 
      color: 'emerald',
      actions: ['Sesiones 1-2: OKR Personal', 'Sesiones 3-4: Shadowing (Sombra)', 'Sesiones 5-6: Aplicaci√≥n real'],
      icebreakers: ['¬øQu√© aprendimos del √∫ltimo reto?', '¬øC√≥mo aplicamos esto al proceso cr√≠tico?']
    },
    { 
      title: 'Legado', 
      icon: <Scroll />, 
      color: 'amber',
      actions: ['Sesi√≥n de Graduaci√≥n', 'Entrega de certificados', 'Definici√≥n de plan de continuidad'],
      icebreakers: ['¬øEn qu√© reaccionas diferente hoy?', '¬øQu√© herramienta te llevas en la mochila?']
    },
  ];

  return (
    <div className="min-h-screen bg-slate-50 p-4 md:p-8 font-sans">
      {/* Header Section with Dark Logo Container */}
      <header className="max-w-6xl mx-auto text-center mb-10">
        <div className="flex flex-col items-center mb-6">
          <div className="bg-slate-900 px-8 py-6 rounded-3xl mb-6 shadow-xl border border-slate-800">
            <img 
              src="https://i.imgur.com/yyI6FWO.png" 
              alt="Logo Comfamiliar Risaralda" 
              className="h-16 md:h-20 w-auto object-contain"
              onError={(e) => e.target.style.display = 'none'}
            />
          </div>
          <div className="inline-flex items-center space-x-2 bg-blue-50 text-blue-700 px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-widest border border-blue-100">
            <Info size={14} />
            <span>Gesti√≥n Humana - Comfamiliar Risaralda</span>
          </div>
        </div>
        <h1 className="text-4xl md:text-5xl font-black text-slate-900 mb-4 tracking-tight">
          Plan Carrera <span className="text-blue-600">2026 ‚Äì 2030</span>
        </h1>
      </header>

      {/* Highlights */}
      <div className="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-4 mb-10">
        {[
          { icon: <Users className="text-blue-500" />, label: 'Colaboradores', value: '2.300+', color: 'bg-blue-500' },
          { icon: <ShieldCheck className="text-teal-500" />, label: 'Cargos Cr√≠ticos', value: '34', color: 'bg-teal-500' },
          { icon: <Rocket className="text-indigo-500" />, label: 'Duplas Mentoring', value: '10 Piloto', color: 'bg-indigo-500' }
        ].map((stat, i) => (
          <div key={i} className="bg-white p-5 rounded-2xl shadow-sm border border-slate-100 flex items-center space-x-4">
            <div className="p-3 bg-slate-50 rounded-xl">{stat.icon}</div>
            <div>
              <div className="text-2xl font-bold text-slate-800">{stat.value}</div>
              <div className="text-xs text-slate-500 uppercase font-semibold tracking-tighter">{stat.label}</div>
            </div>
          </div>
        ))}
      </div>

      {/* Navigation Tabs */}
      <div className="max-w-6xl mx-auto">
        <div className="flex flex-wrap bg-slate-200/50 p-1.5 rounded-2xl w-fit mx-auto mb-8 gap-1">
          <button 
            onClick={() => setActiveTab('diagnostico')}
            className={`px-4 py-2.5 rounded-xl font-bold text-sm transition-all ${activeTab === 'diagnostico' ? 'bg-white text-blue-600 shadow-sm' : 'text-slate-500 hover:text-slate-800'}`}
          >
            Fases Diagn√≥sticas
          </button>
          <button 
            onClick={() => setActiveTab('estrategias')}
            className={`px-4 py-2.5 rounded-xl font-bold text-sm transition-all ${activeTab === 'estrategias' ? 'bg-white text-blue-600 shadow-sm' : 'text-slate-500 hover:text-slate-800'}`}
          >
            Estrategias de Desarrollo
          </button>
          <button 
            onClick={() => setActiveTab('mentoring')}
            className={`px-4 py-2.5 rounded-xl font-bold text-sm transition-all ${activeTab === 'mentoring' ? 'bg-indigo-600 text-white shadow-md' : 'text-slate-500 hover:text-slate-800'}`}
          >
            Mentoring Estrat√©gico
          </button>
        </div>

        {/* --- TABS CONTENT --- */}

        {activeTab === 'diagnostico' && (
          <div className="animate-in fade-in duration-500">
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
              {phases.map((phase) => (
                <ExpandableCard key={phase.id} id={phase.id} title={phase.title} shortDesc={phase.short} longDesc={phase.long} type="phase" />
              ))}
            </div>
          </div>
        )}

        {activeTab === 'estrategias' && (
          <div className="animate-in fade-in duration-500">
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
              {strategies.map((strat, i) => (
                <ExpandableCard key={i} title={strat.title} shortDesc={strat.short} longDesc={strat.long} icon={strat.icon} type="strategy" />
              ))}
            </div>
            <div className="mt-8 p-6 bg-white border border-slate-100 rounded-3xl shadow-sm flex flex-col md:flex-row gap-6">
               <div className="flex-1">
                  <h3 className="font-bold text-slate-800 mb-4 flex items-center gap-2"><CheckCircle2 className="text-teal-500"/> Promoci√≥n Interna</h3>
                  <p className="text-sm text-slate-600">Para aplicar a nuevas vacantes el colaborador requiere: Desempe√±o &gt; 90%, 2 a√±os de permanencia y no tener planes de mejora vigentes.</p>
               </div>
               <div className="flex-1 bg-slate-50 p-4 rounded-2xl border border-slate-100">
                  <h3 className="font-bold text-slate-800 mb-2 flex items-center gap-2"><TrendingUp className="text-indigo-500"/> Rutas Duales</h3>
                  <p className="text-sm text-slate-600">El plan permite crecer como Especialista T√©cnico o como L√≠der de √Årea (Gerencial).</p>
               </div>
            </div>
          </div>
        )}

        {activeTab === 'mentoring' && (
          <div className="animate-in fade-in duration-500 space-y-8">
            {/* M√≠stica Section */}
            <div className="bg-white p-8 rounded-3xl shadow-sm border border-slate-100">
              <div className="text-center mb-8">
                <h2 className="text-2xl font-black text-slate-800">M√≠stica del Programa</h2>
                <p className="text-slate-500 text-sm">El ecosistema de aprendizaje para las 10 duplas piloto.</p>
              </div>
              <div className="grid grid-cols-1 md:grid-cols-4 gap-6">
                {mentoringPhases.map((m, i) => (
                  <div key={i} className="text-center group">
                    <div className={`${m.color} text-white w-14 h-14 rounded-2xl flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform shadow-lg`}>
                      {m.icon}
                    </div>
                    <h4 className="font-bold text-slate-800 mb-2">{m.title}</h4>
                    <p className="text-xs text-slate-500 leading-relaxed">{m.desc}</p>
                  </div>
                ))}
              </div>
            </div>

            {/* Gu√≠a del Viajero Section */}
            <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
              <div className="lg:col-span-1 bg-slate-900 text-white p-6 rounded-3xl shadow-xl">
                <h3 className="text-xl font-bold mb-6 flex items-center gap-2"><MapIcon size={20} className="text-blue-400"/> Gu√≠a del Viajero</h3>
                <div className="space-y-3">
                  {guideContent.map((item, idx) => (
                    <button 
                      key={idx}
                      onClick={() => setActiveGuide(idx)}
                      className={`w-full text-left p-4 rounded-xl transition-all border ${activeGuide === idx ? 'bg-white/10 border-white/20 shadow-lg' : 'border-transparent hover:bg-white/5'}`}
                    >
                      <div className="flex items-center gap-3">
                        <div className={`p-1.5 rounded-lg bg-${item.color}-500 text-white`}>{item.icon}</div>
                        <div>
                          <p className="text-[10px] uppercase font-bold text-slate-400">Fase {idx + 1}</p>
                          <p className="font-bold text-sm">{item.title}</p>
                        </div>
                      </div>
                    </button>
                  ))}
                </div>
              </div>

              <div className="lg:col-span-2 bg-white p-8 rounded-3xl shadow-sm border border-slate-100">
                <div className="flex items-center gap-4 mb-6 pb-6 border-b border-slate-50">
                   <div className={`p-3 bg-${guideContent[activeGuide].color}-50 text-${guideContent[activeGuide].color}-600 rounded-2xl`}>
                    {guideContent[activeGuide].icon}
                   </div>
                   <div>
                    <h3 className="text-2xl font-bold text-slate-800">Fase: {guideContent[activeGuide].title}</h3>
                    <p className="text-sm text-slate-500 italic">Acciones t√°cticas y rompehielos para la dupla.</p>
                   </div>
                </div>
                
                <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                  <div>
                    <h4 className="font-bold text-slate-700 mb-4 flex items-center gap-2"><CheckCircle2 size={16} className="text-emerald-500"/> Acciones Clave</h4>
                    <ul className="space-y-3">
                      {guideContent[activeGuide].actions.map((act, j) => (
                        <li key={j} className="text-sm text-slate-600 flex items-start gap-2">
                          <span className="w-1.5 h-1.5 rounded-full bg-slate-300 mt-1.5 shrink-0"></span>
                          {act}
                        </li>
                      ))}
                    </ul>
                  </div>
                  <div className={`bg-${guideContent[activeGuide].color}-50/30 p-5 rounded-2xl border border-${guideContent[activeGuide].color}-100`}>
                    <h4 className={`font-bold text-${guideContent[activeGuide].color}-800 mb-4 flex items-center gap-2`}><MessageCircle size={16}/> Rompehielos</h4>
                    <ul className="space-y-3 italic text-sm text-slate-600">
                      {guideContent[activeGuide].icebreakers.map((ice, k) => (
                        <li key={k}>"{ice}"</li>
                      ))}
                    </ul>
                  </div>
                </div>

                <div className="mt-8 pt-6 border-t border-slate-50">
                  <a 
                    href="https://talentohumanoccf.github.io/app-mentoring/" 
                    target="_blank"
                    className="inline-flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-indigo-700 transition-all shadow-lg hover:shadow-indigo-200"
                  >
                    Ir al Aplicativo de Mentoring <Rocket size={18}/>
                  </a>
                </div>
              </div>
            </div>

            {/* Cronograma / Gantt Mini */}
            <div className="bg-slate-900 p-8 rounded-3xl text-white">
              <div className="flex items-center justify-between mb-8">
                <h3 className="text-xl font-bold">Ruta de Avance Estrat√©gica</h3>
                <span className="text-xs bg-white/10 px-3 py-1 rounded-full text-slate-300 uppercase tracking-widest font-bold">Ciclo 3 Meses</span>
              </div>
              <div className="space-y-4">
                <div className="grid grid-cols-3 gap-2 text-[10px] font-bold text-slate-500 uppercase tracking-widest text-center">
                  <span>Mes 1</span>
                  <span>Mes 2</span>
                  <span>Mes 3</span>
                </div>
                <div className="relative h-10 bg-slate-800 rounded-full overflow-hidden border border-slate-700">
                   <div className="absolute left-0 top-0 h-full w-1/3 bg-blue-500 border-r border-blue-400 flex items-center justify-center text-[10px] font-bold">SEMILLA</div>
                   <div className="absolute left-[33%] top-0 h-full w-[15%] bg-indigo-500 border-r border-indigo-400 flex items-center justify-center text-[10px] font-bold">ALQUIMIA</div>
                   <div className="absolute left-[48%] top-0 h-full w-[40%] bg-emerald-500 border-r border-emerald-400 flex items-center justify-center text-[10px] font-bold">TRAVES√çA</div>
                   <div className="absolute left-[88%] top-0 h-full w-[12%] bg-amber-500 flex items-center justify-center text-[10px] font-bold italic text-amber-900">LEGADO</div>
                </div>
                <div className="flex justify-between text-[10px] text-slate-400 pt-2 px-2">
                  <span>Matchmaking ‚òÖ</span>
                  <span>6 Sesiones Guiadas</span>
                  <span>Graduaci√≥n üéì</span>
                </div>
              </div>
            </div>
          </div>
        )}
      </div>

      <footer className="max-w-6xl mx-auto mt-12 pt-8 border-t border-slate-200 flex flex-col md:flex-row justify-between items-center text-slate-400 text-xs gap-4 pb-8">
        <p>¬© 2026 COMFAMILIAR RISARALDA - GESTI√ìN HUMANA Y DESARROLLO</p>
        <div className="flex items-center space-x-4 font-bold text-slate-500 uppercase tracking-tighter">
          <span>Incondicionales con Risaralda</span>
        </div>
      </footer>
    </div>
  );
};

export default App;